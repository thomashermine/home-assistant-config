---
# Thomas less than 1km from Home --> warn Caroline (if he is home)
#
# https://www.home-assistant.io/integrations/proximity
#

alias: "presence_approaching_thomas"
trigger:
  - platform: numeric_state
    entity_id: proximity.home_thomas
    below: 0.5
condition:
  condition: and
  conditions:
    - condition: state
      entity_id: person.caroline
      state: "home"
action:
  # TTS Announce to Caroline that Thomas is coming back
  - service: script.tts_say_interruption
    data:
      message: >
        {{ [
        "Thomas rentre √† la maison dans quelques minutes.",
        "Thomas arrive √† la maison dans quelques minutes.",
        "Thomas revient √† la maison.",
        "Thomas arrive √† la maison",
        "Thomas revient.",
        "Thomas arrive",
        ] |random }}
  # Notify Thomas that Caroline is aware of that
  - service: notify.notify_thomas
    data:
      title: "Bon retour √† la maison. üè°"
      message: Caroline est pr√©venue de votre arriv√©e
