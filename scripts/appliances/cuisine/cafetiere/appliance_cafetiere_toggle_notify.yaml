---
# appliance_cafetiere_toggle_notify
#
# Toggle the cafetiere on and off, while notifying us about it
#
appliance_cafetiere_toggle_notify:
  sequence:
    - choose:
        # Was off, will be turned on
        - conditions:
          - condition: state
            entity_id: switch.cafetiere
            state: "off"
          sequence:
            - service: switch.turn_on
              entity_id: switch.cafetiere
            - service: tts.cloud_say
              data:
                entity_id: media_player.chambre
                message: La cafetière est allumée.
                options:
                  gender: female
                language: fr-FR
        # ELSE off
        default:
          - service: switch.turn_off
            entity_id: switch.cafetiere
          - service: tts.cloud_say
            data:
              entity_id: media_player.chambre
              message: La cafetière est éteinte.
              options:
                gender: female
              language: fr-FR